# AIxiaozhi AI小智聊天机器人

# **项目概述**

## **项目背景**

随着大模型的火热，自然会话app和设备风靡一时。在嵌入式领域，小智智能对话机器人是最流行的。小智智能机器人项目分嵌入式前端和网站后端。嵌入式前端原本是使用C++实现的，本项目是使用C语言重新实现小智项目，使用小智通信协议完成和小智服务器交互的对话机器人。

## **项目目标**

本项目主要是使用esp32对小智通信协议的C语言重新实现，同时将所有依赖的下游components替换为espressif官方库（官方库一般有更好的维护周期和技术支持）。

## **项目架构**

![img](https://cdn.jsdelivr.net/gh/gybpersist/imges/images%2F2025%2F09%2F16%2F11-45-15-5d0cf7f2083f5163cc9375d2966d2439-wps1-ba41ca.jpg) 

**1） **协议层

小智协议使用Json和**opus**音频数据和服务器交互，底层传输层使用**websocket**。

**2）**主控逻辑

主控逻辑主要负责聊天机器人的状态切换：例如空闲状态、讲话状态、倾听状态、激活状态，升级状态等。

**3）**IOT控制模块

这个模块主要实现后台大模型对于机器人前端的设备控制能力。例如可以通过对话控制大模型开启或者关闭设备的扬声器，调整扬声器音量等。

**4）**音频输入输出接口

音频输入输出接口主要负责唤醒识别，语音采集和播放服务器的音频数据。其底层依赖于**opus**编解码器和esp-sr语音识别模型。

**5）**UI显示接口

UI显示接口主要负责在**lcd**上显示大模型的响应，包括**llm**表情，使机器人更生动，其依赖于**lvgl**库。本项目目前还未实现UI显示部分。

**6）**bsp驱动层

BSP驱动层主要是对开发板的适配。如果需要将本项目移植到其他开发板，直接在BSP驱动层适配即可。